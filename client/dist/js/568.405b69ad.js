"use strict";(self["webpackChunkssg60th_d_exam_client"]=self["webpackChunkssg60th_d_exam_client"]||[]).push([[568],{7367:function(t,e,s){s.d(e,{A:function(){return O}});var n=s(6768),r=s(4232),a=s(5130);const i={xmlns:"http://www.w3.org/2000/svg",style:{display:"none"}},l=(0,n.Fv)('<symbol id="check-circle-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"></path></symbol><symbol id="info-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"></path></symbol><symbol id="exclamation-triangle-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"></path></symbol>',3),o=[l],c={class:"container"},d={class:"col-12"},u={class:"bi flex-shrink-0 me-2",width:"24",height:"24",role:"img","aria-label":"Success:"},h=(0,n.Lk)("use",{"xlink:href":"#check-circle-fill"},null,-1),m=[h],p={class:"bi flex-shrink-0 me-2",width:"24",height:"24",role:"img","aria-label":"Info:"},E=(0,n.Lk)("use",{"xlink:href":"#info-fill"},null,-1),k=[E],g={class:"bi flex-shrink-0 me-2",width:"24",height:"24",role:"img","aria-label":"Warning:"},f=(0,n.Lk)("use",{"xlink:href":"#exclamation-triangle-fill"},null,-1),b=[f],L={class:"alert-heading d-inline m-1"},T=(0,n.Lk)("div",{class:"col-12"},[(0,n.Lk)("hr")],-1),v={class:"col-12"},C={key:0,class:"col-12 d-grid gap-2"},M={key:1,class:"col-6 d-grid gap-2"},w={key:2,class:"col-6 d-grid gap-2"};function y(t,e,s,l,h,E){return(0,n.uX)(),(0,n.CE)(n.FK,null,[((0,n.uX)(),(0,n.CE)("svg",i,o)),(0,n.Lk)("div",c,[(0,n.bo)((0,n.Lk)("div",{class:(0,r.C4)(["alert row",E.typeColor1]),role:"alert"},[(0,n.Lk)("div",d,[(0,n.bo)(((0,n.uX)(),(0,n.CE)("svg",u,m,512)),[[a.aG,"primary"===s.MSGTYPE]]),(0,n.bo)(((0,n.uX)(),(0,n.CE)("svg",p,k,512)),[[a.aG,"warning"===s.MSGTYPE]]),(0,n.bo)(((0,n.uX)(),(0,n.CE)("svg",g,b,512)),[[a.aG,"danger"===s.MSGTYPE]]),(0,n.Lk)("h4",L,(0,r.v_)(s.TITLE),1)]),T,(0,n.Lk)("div",v,[(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.TEXT,((t,e)=>((0,n.uX)(),(0,n.CE)("li",{key:e},(0,r.v_)(t),1)))),128))])]),"OKOnly"===s.MODE?((0,n.uX)(),(0,n.CE)("div",C,[(0,n.Lk)("button",{type:"button",class:(0,r.C4)(E.typeColor2),onClick:e[0]||(e[0]=e=>t.$emit("alertCheck",!0,"OK"))},"確定",2)])):(0,n.Q3)("",!0),"OKCancel"===s.MODE?((0,n.uX)(),(0,n.CE)("div",M,[(0,n.Lk)("button",{type:"button",class:(0,r.C4)(E.typeColor2),onClick:e[1]||(e[1]=e=>t.$emit("alertCheck",!0,"OK"))},"確定",2)])):(0,n.Q3)("",!0),"OKCancel"===s.MODE?((0,n.uX)(),(0,n.CE)("div",w,[(0,n.Lk)("button",{type:"button",class:"btn btn-secondary btn-sm",onClick:e[2]||(e[2]=e=>t.$emit("alertCheck",!0,"Cancel"))},"取消")])):(0,n.Q3)("",!0)],2),[[a.aG,t.$store.state.alertVisible]])])],64)}var S={name:":Alert",props:{MODE:String,MSGTYPE:String,TITLE:String,TEXT:Array},emits:["alertCheck"],data(){return{}},methods:{},computed:{typeColor1:function(){return"primary"===this.MSGTYPE?"alert-primary":"warning"===this.MSGTYPE?"alert-warning":"danger"===this.MSGTYPE?"alert-danger":void 0},typeColor2:function(){return"primary"===this.MSGTYPE?"btn btn-primary btn-sm":"warning"===this.MSGTYPE?"btn btn-warning btn-sm":"danger"===this.MSGTYPE?"btn btn-danger btn-sm":void 0}},watch:{}},G=s(1241);const I=(0,G.A)(S,[["render",y]]);var O=I},568:function(t,e,s){s.r(e),s.d(e,{default:function(){return D}});s(4114);var n=s(6768),r=s(4232),a=s(5130);const i={class:"container"},l=(0,n.Lk)("div",{class:"text mt-4"},[(0,n.Lk)("span",null,"階"),(0,n.Lk)("span",null,"段"),(0,n.Lk)("span",null,"測"),(0,n.Lk)("span",null,"驗")],-1),o={class:"time"},c={id:"d"},d={id:"h"},u={id:"m"},h={id:"s"},m=(0,n.Lk)("h2",{class:"text-center mt-4"},"請登入",-1),p={class:"row"},E={class:"col-12"},k={class:"form-floating mb-3"},g=(0,n.Lk)("label",{for:"accountInput"},"帳號",-1),f={class:"invalid-feedback text-end"},b={class:"form-floating mb-3"},L=(0,n.Lk)("label",{for:"passwordInput"},"密碼",-1),T={class:"invalid-feedback text-end"},v=(0,n.Lk)("div",{class:"col-8 text-start"},null,-1),C={class:"col-4 text-end"},M={class:"col-12 d-grid gap-2"};function w(t,e,s,w,y,S){const G=(0,n.g2)("Alert"),I=(0,n.g2)("Loader");return(0,n.uX)(),(0,n.CE)("div",i,[(0,n.bF)(G,{MODE:y.MSG.MODE,MSGTYPE:y.MSG.TYPE,TITLE:y.MSG.TITLE,TEXT:y.MSG.TEXT,onAlertCheck:e[0]||(e[0]=(t,e)=>y.alertCheck={isClick:t,OKorCancel:e})},null,8,["MODE","MSGTYPE","TITLE","TEXT"]),(0,n.bF)(I),l,(0,n.Lk)("div",o,[(0,n.Lk)("span",null,[(0,n.Lk)("div",c,(0,r.v_)(y.timeCount.days),1),(0,n.eW)(" DAYS ")]),(0,n.Lk)("span",null,[(0,n.Lk)("div",d,(0,r.v_)(y.timeCount.hours),1),(0,n.eW)(" HOURS ")]),(0,n.Lk)("span",null,[(0,n.Lk)("div",u,(0,r.v_)(y.timeCount.minutes),1),(0,n.eW)(" MINS ")]),(0,n.Lk)("span",null,[(0,n.Lk)("div",h,(0,r.v_)(y.timeCount.seconds),1),(0,n.eW)(" SECS ")])]),m,(0,n.Lk)("form",p,[(0,n.Lk)("div",E,[(0,n.Lk)("div",k,[(0,n.bo)((0,n.Lk)("input",{type:"text",class:(0,r.C4)(["form-control",{"is-invalid":y.accountErr}]),name:"accountInput","onUpdate:modelValue":e[1]||(e[1]=t=>y.account=t),placeholder:"帳號"},null,2),[[a.Jo,y.account]]),g,(0,n.Lk)("div",f,(0,r.v_)(y.accountErrMsg),1)]),(0,n.Lk)("div",b,[(0,n.bo)((0,n.Lk)("input",{type:"current-password",class:(0,r.C4)(["form-control",{"is-invalid":y.passwordErr}]),name:"passwordInput","onUpdate:modelValue":e[2]||(e[2]=t=>y.password=t),placeholder:"密碼"},null,2),[[a.Jo,y.password]]),L,(0,n.Lk)("div",T,(0,r.v_)(y.passwordErrMsg),1)])]),v,(0,n.Lk)("div",C,[(0,n.Lk)("p",{onClick:e[3]||(e[3]=e=>t.$router.push("/register"))},"註冊帳戶！")]),(0,n.Lk)("div",M,[(0,n.Lk)("button",{class:"btn btn-success btn-lg",type:"button",onClick:e[4]||(e[4]=(...t)=>S.login&&S.login(...t))},"登入")])])])}var y=s(7367),S=s(6973);s(4979);class G extends Error{}function I(t){return decodeURIComponent(atob(t).replace(/(.)/g,((t,e)=>{let s=e.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s})))}function O(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return I(e)}catch(s){return atob(e)}}function x(t,e){if("string"!==typeof t)throw new G("Invalid token specified: must be a string");e||(e={});const s=!0===e.header?0:1,n=t.split(".")[s];if("string"!==typeof n)throw new G(`Invalid token specified: missing part #${s+1}`);let r;try{r=O(n)}catch(a){throw new G(`Invalid token specified: invalid base64 for part #${s+1} (${a.message})`)}try{return JSON.parse(r)}catch(a){throw new G(`Invalid token specified: invalid json for part #${s+1} (${a.message})`)}}G.prototype.name="InvalidTokenError";var A={name:"Login",components:{Alert:y.A,Loader:S.A},data(){return{MSG:{MODE:"",TYPE:"",TITLE:"",TEXT:[]},alertCheck:!1,funcNum:-1,endTime:new Date,timeCount:{days:"00",hours:"00",minutes:"00",seconds:"00"},account:"",accountErr:!1,accountErrMsg:"",password:"",passwordErr:!1,passwordErrMsg:""}},methods:{login(){""===this.account.trim()&&(this.accountErr=!0,this.accountErrMsg="請輸入帳號"),""===this.password.trim()&&(this.passwordErr=!0,this.passwordErrMsg="請輸入密碼"),this.accountErr||this.passwordErr||this.$http.post("api/users/login",{account:this.account,password:this.password}).then((t=>{if(200===t.data.code){localStorage.setItem("eleToken",t.data.token);const e=x(t.data.token),s={studentID:e.studentID,account:e.account,name:e.name,ident:e.ident,examExp:e.exam_exp};this.$store.commit("SET_ACCOUNT",s),this.alertVisible=!0,this.MSG.MODE="OKOnly",this.funcNum=1,this.MSG.TYPE="primary",this.MSG.TITLE="系統提示",this.MSG.TEXT=t.data.msg}else this.alertVisible=!0,this.MSG.MODE="OKOnly",this.funcNum=2,this.MSG.TYPE="danger",this.MSG.TITLE="系統錯誤",this.MSG.TEXT=t.data.msg})).catch((t=>{this.alertVisible=!0,this.MSG.MODE="OKOnly",this.funcNum=2,this.MSG.TYPE="danger",this.MSG.TITLE="系統錯誤",this.MSG.TEXT=[t]}))},hideAlert(){this.$store.commit("SET_ALERT_VISIBLE",!1),this.alertVisible=!1}},created(){this.$http.get("api/systemManage/getCountDown").then((t=>{200===t.data.code?(this.endTime=new Date(t.data.time),this.timer=setInterval((()=>{let t=new Date,e=this.endTime-t,s=Math.floor(e/864e5),n=Math.floor(e%864e5/36e5),r=Math.floor(e%36e5/6e4),a=Math.floor(e%6e4/1e3);s=s<10?"0"+s:s,n=n<10?"0"+n:n,r=r<10?"0"+r:r,a=a<10?"0"+a:a,this.timeCount={days:s,hours:n,minutes:r,seconds:a},e<=0&&(clearInterval(this.timer),this.timeCount={days:"00",hours:"00",minutes:"00",seconds:"00"})}),1e3)):console.log(t.data.msg)}))},mounted(){},beforeDestroy(){clearInterval(this.timer)},computed:{alertVisible:{get(){return this.$store.state.alertVisible},set(t){this.$store.commit("SET_ALERT_VISIBLE",t)}}},watch:{alertCheck:function(t){if(t.isClick)if("OK"===t.OKorCancel){if(0===this.funcNum)return;1===this.funcNum?"Admin"===this.$store.state.account.ident?(this.hideAlert(),this.$router.push("/systemManage")):(this.hideAlert(),this.$router.push("/examLobby")):2===this.funcNum&&this.hideAlert()}else"Cancel"===t.OKorCancel&&this.hideAlert()},account:function(){""===this.account.trim()?(this.accountErr=!0,this.accountErrMsg="請輸入帳號"):this.accountErr=!1},password:function(){""===this.password.trim()?(this.passwordErr=!0,this.passwordErrMsg="請輸入密碼"):this.passwordErr=!1}}},_=s(1241);const X=(0,_.A)(A,[["render",w]]);var D=X}}]);
//# sourceMappingURL=568.405b69ad.js.map