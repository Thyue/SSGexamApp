"use strict";(self["webpackChunkssg60th_d_exam_client"]=self["webpackChunkssg60th_d_exam_client"]||[]).push([[519],{8755:function(t,e,s){s.d(e,{A:function(){return X}});var i=s(6768),a=s(5130),n=s(4232);const r={xmlns:"http://www.w3.org/2000/svg",style:{display:"none"}},l=(0,i.Fv)('<symbol id="check-circle-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"></path></symbol><symbol id="info-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"></path></symbol><symbol id="exclamation-triangle-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"></path></symbol>',3),o=[l],c={class:"container"},h={class:"alert-background"},d={class:"col-12"},u={class:"bi flex-shrink-0 me-2",width:"24",height:"24",role:"img","aria-label":"Success:"},m=(0,i.Lk)("use",{"xlink:href":"#check-circle-fill"},null,-1),p=[m],E={class:"bi flex-shrink-0 me-2",width:"24",height:"24",role:"img","aria-label":"Info:"},k=(0,i.Lk)("use",{"xlink:href":"#info-fill"},null,-1),T=[k],g={class:"bi flex-shrink-0 me-2",width:"24",height:"24",role:"img","aria-label":"Warning:"},f=(0,i.Lk)("use",{"xlink:href":"#exclamation-triangle-fill"},null,-1),M=[f],b={class:"alert-heading d-inline m-1"},L=(0,i.Lk)("div",{class:"col-12"},[(0,i.Lk)("hr")],-1),v={class:"col-12"},C={key:0,class:"col-12 d-grid gap-2"},S={key:1,class:"col-6 d-grid gap-2"},w={key:2,class:"col-6 d-grid gap-2"};function y(t,e,s,l,m,k){return(0,i.uX)(),(0,i.CE)(i.FK,null,[((0,i.uX)(),(0,i.CE)("svg",r,o)),(0,i.Lk)("div",c,[(0,i.bo)((0,i.Lk)("div",h,null,512),[[a.aG,t.$store.state.alertVisible]]),(0,i.bo)((0,i.Lk)("div",{class:(0,n.C4)(["alert row",k.typeColor1]),role:"alert"},[(0,i.Lk)("div",d,[(0,i.bo)(((0,i.uX)(),(0,i.CE)("svg",u,p,512)),[[a.aG,"primary"===s.MSGTYPE]]),(0,i.bo)(((0,i.uX)(),(0,i.CE)("svg",E,T,512)),[[a.aG,"warning"===s.MSGTYPE]]),(0,i.bo)(((0,i.uX)(),(0,i.CE)("svg",g,M,512)),[[a.aG,"danger"===s.MSGTYPE]]),(0,i.Lk)("h4",b,(0,n.v_)(s.TITLE),1)]),L,(0,i.Lk)("div",v,[(0,i.Lk)("ul",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.TEXT,((t,e)=>((0,i.uX)(),(0,i.CE)("li",{key:e},(0,n.v_)(t),1)))),128))])]),"OKOnly"===s.MODE?((0,i.uX)(),(0,i.CE)("div",C,[(0,i.Lk)("button",{type:"button",class:(0,n.C4)(k.typeColor2),onClick:e[0]||(e[0]=e=>t.$emit("alertCheck",!0,"OK"))},"確定",2)])):(0,i.Q3)("",!0),"OKCancel"===s.MODE?((0,i.uX)(),(0,i.CE)("div",S,[(0,i.Lk)("button",{type:"button",class:(0,n.C4)(k.typeColor2),onClick:e[1]||(e[1]=e=>t.$emit("alertCheck",!0,"OK"))},"確定",2)])):(0,i.Q3)("",!0),"OKCancel"===s.MODE?((0,i.uX)(),(0,i.CE)("div",w,[(0,i.Lk)("button",{type:"button",class:"btn btn-secondary btn-sm",onClick:e[2]||(e[2]=e=>t.$emit("alertCheck",!0,"Cancel"))},"取消")])):(0,i.Q3)("",!0)],2),[[a.aG,t.$store.state.alertVisible]])])],64)}var G={name:":Alert",props:{MODE:String,MSGTYPE:String,TITLE:String,TEXT:Array},emits:["alertCheck"],data(){return{}},methods:{},computed:{typeColor1:function(){return"primary"===this.MSGTYPE?"alert-primary":"warning"===this.MSGTYPE?"alert-warning":"danger"===this.MSGTYPE?"alert-danger":void 0},typeColor2:function(){return"primary"===this.MSGTYPE?"btn btn-primary btn-sm":"warning"===this.MSGTYPE?"btn btn-warning btn-sm":"danger"===this.MSGTYPE?"btn btn-danger btn-sm":void 0}},watch:{}},I=s(1241);const O=(0,I.A)(G,[["render",y]]);var X=O},5519:function(t,e,s){s.r(e),s.d(e,{default:function(){return _}});s(4114);var i=s(6768),a=s(4232),n=s(5130);const r={class:"container"},l=(0,i.Lk)("div",{class:"text mt-4"},[(0,i.Lk)("span",null,"階"),(0,i.Lk)("span",null,"段"),(0,i.Lk)("span",null,"測"),(0,i.Lk)("span",null,"驗")],-1),o={class:"time"},c={id:"d"},h={id:"h"},d={id:"m"},u={id:"s"},m=(0,i.Lk)("h2",{class:"text-center mt-4"},"請登入",-1),p={class:"row"},E={class:"col-12"},k={class:"form-floating mb-3"},T=(0,i.Lk)("label",{for:"accountInput"},"帳號",-1),g={class:"invalid-feedback text-end"},f={class:"form-floating mb-3"},M=(0,i.Lk)("label",{for:"passwordInput"},"密碼",-1),b={class:"invalid-feedback text-end"},L=(0,i.Lk)("div",{class:"col-8 text-start"},null,-1),v={class:"col-4 text-end"},C={class:"col-12 d-grid gap-2"};function S(t,e,s,S,w,y){const G=(0,i.g2)("Alert"),I=(0,i.g2)("Loader");return(0,i.uX)(),(0,i.CE)("div",r,[(0,i.bF)(G,{MODE:w.MSG.MODE,MSGTYPE:w.MSG.TYPE,TITLE:w.MSG.TITLE,TEXT:w.MSG.TEXT,onAlertCheck:e[0]||(e[0]=(t,e)=>w.alertCheck={isClick:t,OKorCancel:e})},null,8,["MODE","MSGTYPE","TITLE","TEXT"]),(0,i.bF)(I),l,(0,i.Lk)("div",o,[(0,i.Lk)("span",null,[(0,i.Lk)("div",c,(0,a.v_)(w.timeCount.days),1),(0,i.eW)(" DAYS ")]),(0,i.Lk)("span",null,[(0,i.Lk)("div",h,(0,a.v_)(w.timeCount.hours),1),(0,i.eW)(" HOURS ")]),(0,i.Lk)("span",null,[(0,i.Lk)("div",d,(0,a.v_)(w.timeCount.minutes),1),(0,i.eW)(" MINS ")]),(0,i.Lk)("span",null,[(0,i.Lk)("div",u,(0,a.v_)(w.timeCount.seconds),1),(0,i.eW)(" SECS ")])]),m,(0,i.Lk)("form",p,[(0,i.Lk)("div",E,[(0,i.Lk)("div",k,[(0,i.bo)((0,i.Lk)("input",{type:"text",class:(0,a.C4)(["form-control",{"is-invalid":w.accountErr}]),name:"accountInput","onUpdate:modelValue":e[1]||(e[1]=t=>w.account=t),placeholder:"帳號"},null,2),[[n.Jo,w.account]]),T,(0,i.Lk)("div",g,(0,a.v_)(w.accountErrMsg),1)]),(0,i.Lk)("div",f,[(0,i.bo)((0,i.Lk)("input",{type:"current-password",class:(0,a.C4)(["form-control",{"is-invalid":w.passwordErr}]),name:"passwordInput","onUpdate:modelValue":e[2]||(e[2]=t=>w.password=t),placeholder:"密碼"},null,2),[[n.Jo,w.password]]),M,(0,i.Lk)("div",b,(0,a.v_)(w.passwordErrMsg),1)])]),L,(0,i.Lk)("div",v,[(0,i.Lk)("p",{onClick:e[3]||(e[3]=e=>t.$router.push("/register"))},"註冊帳戶！")]),(0,i.Lk)("div",C,[(0,i.Lk)("button",{class:"btn btn-success btn-lg",type:"button",onClick:e[4]||(e[4]=(...t)=>y.login&&y.login(...t))},"登入")])])])}var w=s(8755),y=s(6973);s(4979);class G extends Error{}function I(t){return decodeURIComponent(atob(t).replace(/(.)/g,((t,e)=>{let s=e.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s})))}function O(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return I(e)}catch(s){return atob(e)}}function X(t,e){if("string"!==typeof t)throw new G("Invalid token specified: must be a string");e||(e={});const s=!0===e.header?0:1,i=t.split(".")[s];if("string"!==typeof i)throw new G(`Invalid token specified: missing part #${s+1}`);let a;try{a=O(i)}catch(n){throw new G(`Invalid token specified: invalid base64 for part #${s+1} (${n.message})`)}try{return JSON.parse(a)}catch(n){throw new G(`Invalid token specified: invalid json for part #${s+1} (${n.message})`)}}G.prototype.name="InvalidTokenError";var x={name:"Login",components:{Alert:w.A,Loader:y.A},data(){return{MSG:{MODE:"",TYPE:"",TITLE:"",TEXT:[]},alertCheck:!1,funcNum:0,endTime:new Date,timeCount:{days:"00",hours:"00",minutes:"00",seconds:"00"},account:"",accountErr:!1,accountErrMsg:"",password:"",passwordErr:!1,passwordErrMsg:""}},methods:{login(){""===this.account.trim()&&(this.accountErr=!0,this.accountErrMsg="請輸入帳號"),""===this.password.trim()&&(this.passwordErr=!0,this.passwordErrMsg="請輸入密碼"),this.accountErr||this.passwordErr||this.$http.post("api/users/login",{account:this.account,password:this.password}).then((t=>{if(200===t.data.code){localStorage.setItem("eleToken",t.data.token);const e=X(t.data.token),s={studentID:e.studentID,account:e.account,name:e.name,ident:e.ident,examExp:e.exam_exp};this.$store.commit("SET_ACCOUNT",s),this.alertVisible=!0,this.MSG.MODE="OKOnly",this.funcNum=1,this.MSG.TYPE="primary",this.MSG.TITLE="系統提示",this.MSG.TEXT=[],this.MSG.TEXT=this.MSG.TEXT.concat(t.data.msg)}else this.alertVisible=!0,this.MSG.MODE="OKOnly",this.funcNum=-1,this.MSG.TYPE="danger",this.MSG.TITLE="系統錯誤",this.MSG.TEXT=[],this.MSG.TEXT=this.MSG.TEXT.concat(t.data.msg),""!==t.data.sys&&this.MSG.TEXT.push(t.data.sys)})).catch((t=>{this.alertVisible=!0,this.MSG.MODE="OKOnly",this.funcNum=-1,this.MSG.TYPE="danger",this.MSG.TITLE="系統錯誤",this.MSG.TEXT=[],this.MSG.TEXT.push(t)}))},hideAlert(){this.$store.commit("SET_ALERT_VISIBLE",!1),this.alertVisible=!1}},created(){this.$http.get("api/systemManage/getCountDown").then((t=>{200===t.data.code?(this.endTime=new Date(t.data.time),this.timer=setInterval((()=>{let t=new Date,e=this.endTime-t,s=Math.floor(e/864e5),i=Math.floor(e%864e5/36e5),a=Math.floor(e%36e5/6e4),n=Math.floor(e%6e4/1e3);s=s<10?"0"+s:s,i=i<10?"0"+i:i,a=a<10?"0"+a:a,n=n<10?"0"+n:n,this.timeCount={days:s,hours:i,minutes:a,seconds:n},e<=0&&(clearInterval(this.timer),this.timeCount={days:"00",hours:"00",minutes:"00",seconds:"00"})}),1e3)):(this.alertVisible=!0,this.MSG.MODE="OKOnly",this.funcNum=-1,this.MSG.TYPE="danger",this.MSG.TITLE="系統錯誤",this.MSG.TEXT=[],this.MSG.TEXT=this.MSG.TEXT.concat(t.data.msg),""!==t.data.sys&&this.MSG.TEXT.push(t.data.sys))}))},mounted(){},beforeDestroy(){clearInterval(this.timer)},computed:{alertVisible:{get(){return this.$store.state.alertVisible},set(t){this.$store.commit("SET_ALERT_VISIBLE",t)}}},watch:{alertCheck:function(t){if(t.isClick)if("OK"===t.OKorCancel){if(0===this.funcNum)return;-1===this.funcNum?this.hideAlert():-2===this.funcNum?(this.hideAlert(),this.$router.go(-1)):1===this.funcNum&&("Admin"===this.$store.state.account.ident?(this.hideAlert(),this.$router.push("/systemManage")):(this.hideAlert(),this.$router.push("/examLobby")))}else"Cancel"===t.OKorCancel&&this.hideAlert()},account:function(){""===this.account.trim()?(this.accountErr=!0,this.accountErrMsg="請輸入帳號"):this.accountErr=!1},password:function(){""===this.password.trim()?(this.passwordErr=!0,this.passwordErrMsg="請輸入密碼"):this.passwordErr=!1}}},A=s(1241);const $=(0,A.A)(x,[["render",S]]);var _=$}}]);
//# sourceMappingURL=519.c5657b80.js.map