"use strict";(self["webpackChunkssg60th_d_exam_client"]=self["webpackChunkssg60th_d_exam_client"]||[]).push([[733],{8755:function(t,e,s){s.d(e,{A:function(){return I}});var i=s(6768),l=s(5130),a=s(4232);const n={xmlns:"http://www.w3.org/2000/svg",style:{display:"none"}},r=(0,i.Fv)('<symbol id="check-circle-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"></path></symbol><symbol id="info-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"></path></symbol><symbol id="exclamation-triangle-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"></path></symbol>',3),o=[r],c={class:"container"},u={class:"alert-background"},h={class:"col-12"},d={class:"bi flex-shrink-0 me-2",width:"24",height:"24",role:"img","aria-label":"Success:"},T=(0,i.Lk)("use",{"xlink:href":"#check-circle-fill"},null,-1),E=[T],p={class:"bi flex-shrink-0 me-2",width:"24",height:"24",role:"img","aria-label":"Info:"},m=(0,i.Lk)("use",{"xlink:href":"#info-fill"},null,-1),M=[m],b={class:"bi flex-shrink-0 me-2",width:"24",height:"24",role:"img","aria-label":"Warning:"},g=(0,i.Lk)("use",{"xlink:href":"#exclamation-triangle-fill"},null,-1),G=[g],k={class:"alert-heading d-inline m-1"},S=(0,i.Lk)("div",{class:"col-12"},[(0,i.Lk)("hr")],-1),L={class:"col-12"},f={key:0,class:"col-12 d-grid gap-2"},C={key:1,class:"col-6 d-grid gap-2"},y={key:2,class:"col-6 d-grid gap-2"};function v(t,e,s,r,T,m){return(0,i.uX)(),(0,i.CE)(i.FK,null,[((0,i.uX)(),(0,i.CE)("svg",n,o)),(0,i.Lk)("div",c,[(0,i.bo)((0,i.Lk)("div",u,null,512),[[l.aG,t.$store.state.alertVisible]]),(0,i.bo)((0,i.Lk)("div",{class:(0,a.C4)(["alert row",m.typeColor1]),role:"alert"},[(0,i.Lk)("div",h,[(0,i.bo)(((0,i.uX)(),(0,i.CE)("svg",d,E,512)),[[l.aG,"primary"===s.MSGTYPE]]),(0,i.bo)(((0,i.uX)(),(0,i.CE)("svg",p,M,512)),[[l.aG,"warning"===s.MSGTYPE]]),(0,i.bo)(((0,i.uX)(),(0,i.CE)("svg",b,G,512)),[[l.aG,"danger"===s.MSGTYPE]]),(0,i.Lk)("h4",k,(0,a.v_)(s.TITLE),1)]),S,(0,i.Lk)("div",L,[(0,i.Lk)("ul",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.TEXT,((t,e)=>((0,i.uX)(),(0,i.CE)("li",{key:e},(0,a.v_)(t),1)))),128))])]),"OKOnly"===s.MODE?((0,i.uX)(),(0,i.CE)("div",f,[(0,i.Lk)("button",{type:"button",class:(0,a.C4)(m.typeColor2),onClick:e[0]||(e[0]=e=>t.$emit("alertCheck",!0,"OK"))},"確定",2)])):(0,i.Q3)("",!0),"OKCancel"===s.MODE?((0,i.uX)(),(0,i.CE)("div",C,[(0,i.Lk)("button",{type:"button",class:(0,a.C4)(m.typeColor2),onClick:e[1]||(e[1]=e=>t.$emit("alertCheck",!0,"OK"))},"確定",2)])):(0,i.Q3)("",!0),"OKCancel"===s.MODE?((0,i.uX)(),(0,i.CE)("div",y,[(0,i.Lk)("button",{type:"button",class:"btn btn-secondary btn-sm",onClick:e[2]||(e[2]=e=>t.$emit("alertCheck",!0,"Cancel"))},"取消")])):(0,i.Q3)("",!0)],2),[[l.aG,t.$store.state.alertVisible]])])],64)}var O={name:":Alert",props:{MODE:String,MSGTYPE:String,TITLE:String,TEXT:Array},emits:["alertCheck"],data(){return{}},methods:{},computed:{typeColor1:function(){return"primary"===this.MSGTYPE?"alert-primary":"warning"===this.MSGTYPE?"alert-warning":"danger"===this.MSGTYPE?"alert-danger":void 0},typeColor2:function(){return"primary"===this.MSGTYPE?"btn btn-primary btn-sm":"warning"===this.MSGTYPE?"btn btn-warning btn-sm":"danger"===this.MSGTYPE?"btn btn-danger btn-sm":void 0}},watch:{}},X=s(1241);const D=(0,X.A)(O,[["render",v]]);var I=D},3733:function(t,e,s){s.r(e),s.d(e,{default:function(){return y}});var i=s(6768),l=s(4232),a=s(5130);const n={class:"container"},r=(0,i.Lk)("h2",{class:"text-center"},"題庫管理",-1),o={class:"row"},c={class:"col-12"},u={class:"input-group mb-3"},h={class:"progress"},d={class:"col-12 d-grid gap-2 my-2"},T={key:0,class:"text-danger fw-bold fs-5 text-center"},E={key:1,class:"row"},p={class:"col-12"},m={class:"table"},M=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("td",null,"QGID"),(0,i.Lk)("td",null,"題組"),(0,i.Lk)("td",null,"選擇")])],-1),b=["value"],g={class:"col-12 d-grid gap-2 my-2"};function G(t,e,s,G,k,S){const L=(0,i.g2)("Alert");return(0,i.uX)(),(0,i.CE)("div",n,[r,(0,i.Lk)("button",{class:"btn btn-outline-secondary btn-sm mb-3",type:"button",onClick:e[0]||(e[0]=e=>t.$router.go(-1))},"返回上一頁"),(0,i.bF)(L,{MODE:k.MSG.MODE,MSGTYPE:k.MSG.TYPE,TITLE:k.MSG.TITLE,TEXT:k.MSG.TEXT,onAlertCheck:e[1]||(e[1]=(t,e)=>k.alertCheck={isClick:t,OKorCancel:e})},null,8,["MODE","MSGTYPE","TITLE","TEXT"]),(0,i.Lk)("form",o,[(0,i.Lk)("div",c,[(0,i.Lk)("div",u,[(0,i.Lk)("input",{type:"file",class:"form-control",onChange:e[2]||(e[2]=(...t)=>S.onFileSelected&&S.onFileSelected(...t))},null,32)]),(0,i.Lk)("div",h,[(0,i.Lk)("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar","aria-valuenow":"75","aria-valuemin":"0","aria-valuemax":"100",style:(0,l.Tr)("width:"+k.uploadPercentage+"%")},(0,l.v_)(k.uploadPercentage)+"% ",5)])]),(0,i.Lk)("div",d,[(0,i.Lk)("button",{class:"btn btn-success btn-lg",type:"button",onClick:e[3]||(e[3]=t=>S.uploadFile())},"新增題組")])]),0===k.questionGroupData.length?((0,i.uX)(),(0,i.CE)("p",T,"目前尚未上傳題組。")):((0,i.uX)(),(0,i.CE)("form",E,[(0,i.Lk)("div",p,[(0,i.Lk)("table",m,[M,(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(k.questionGroupData,(t=>((0,i.uX)(),(0,i.CE)("tr",{class:(0,l.C4)(t.status?"table-success":"table-danger")},[(0,i.Lk)("td",null,(0,l.v_)(t.QGID),1),(0,i.Lk)("td",null,(0,l.v_)(t.subject),1),(0,i.Lk)("td",null,[(0,i.bo)((0,i.Lk)("input",{class:"form-check-input",type:"radio",name:"Radio",value:t.QGID,"onUpdate:modelValue":e[4]||(e[4]=t=>k.selectQGID=t)},null,8,b),[[a.XL,k.selectQGID]])])],2)))),256))])])]),(0,i.Lk)("div",g,[(0,i.Lk)("button",{class:"btn btn-primary btn-lg",type:"button",onClick:e[5]||(e[5]=t=>S.selectDeal())},"執行")])]))])}s(4114);var k=s(9325),S=s(8755),L={name:"QuestionManage",components:{Alert:S.A},data(){return{MSG:{MODE:"",TYPE:"",TITLE:"",TEXT:[]},alertCheck:!1,funcNum:0,selectedFile:null,uploadPercentage:0,questionGroupData:[],selectQGID:""}},methods:{onFileSelected(t){this.selectedFile=t.target.files[0]},uploadFile(){if(null===this.selectedFile)return this.alertVisible=!0,this.MSG.MODE="OKOnly",this.funcNum=-1,this.MSG.TYPE="warning",this.MSG.TITLE="系統警告",void(this.MSG.TEXT=["請選擇檔案。"]);if("xlsx"!==this.selectedFile.name.split(".").pop()&&"xls"!==this.selectedFile.name.split(".").pop())return this.alertVisible=!0,this.MSG.MODE="OKOnly",this.funcNum=-1,this.MSG.TYPE="warning",this.MSG.TITLE="系統警告",void(this.MSG.TEXT=["檔案格式錯誤","請選擇正確的檔案格式。","僅允許.xls及.xlsx"]);const t=new FormData;t.append("file",this.selectedFile,this.selectedFile.name),this.$http.post("api/questionManage/uploadQuestionGroup",t,{onUploadProgress:t=>{this.uploadPercentage=parseInt(Math.round(t.loaded/t.total*100))}}).then((t=>{setTimeout((()=>{this.uploadPercentage=0,this.alertVisible=!1}),1e3),200===t.data.code?(this.alertVisible=!0,this.MSG.MODE="OKOnly",this.funcNum=-1,this.MSG.TYPE="primary",this.MSG.TITLE="系統提示",this.MSG.TEXT=[],this.MSG.TEXT=this.MSG.TEXT.concat(t.data.msg),this.$http.get("api/questionManage/getQuestionGroups").then((t=>{this.questionGroupData=t.data.data})).catch((t=>{this.alertVisible=!0,this.MSG.MODE="OKOnly",this.funcNum=-1,this.MSG.TYPE="danger",this.MSG.TITLE="系統錯誤",this.MSG.TEXT=[],this.MSG.TEXT.push(t)}))):(this.alertVisible=!0,this.MSG.MODE="OKOnly",this.funcNum=-1,this.MSG.TYPE="warning",this.MSG.TITLE="系統警告",this.MSG.TEXT=[],this.MSG.TEXT=this.MSG.TEXT.concat(t.data.msg),""!==t.data.sys&&this.MSG.TEXT.push(t.data.sys))})).catch((t=>{this.alertVisible=!0,this.MSG.MODE="OKOnly",this.funcNum=-1,this.MSG.TYPE="danger",this.MSG.TITLE="系統錯誤",this.MSG.TEXT=[],this.MSG.TEXT.push(t)}))},selectDeal(){if(""!==this.selectQGID){const t=this.questionGroupData.find((t=>t.QGID===this.selectQGID));this.$store.commit("SET_QUEST_GROUP_EDIT",t),k.A.push("/questionEdit")}else this.alertVisible=!0,this.MSG.MODE="OKOnly",this.funcNum=-1,this.MSG.TYPE="warning",this.MSG.TITLE="系統警告",this.MSG.TEXT=["請選擇題組。"]},hideAlert(){this.$store.commit("SET_ALERT_VISIBLE",!1),this.alertVisible=!1}},created(){this.$http.get("api/questionManage/getQuestionGroups").then((t=>{this.questionGroupData=t.data.data})).catch((t=>{this.alertVisible=!0,this.MSG.MODE="OKOnly",this.funcNum=-1,this.MSG.TYPE="danger",this.MSG.TITLE="系統錯誤",this.MSG.TEXT=[],this.MSG.TEXT.push(t)}))},mounted(){},computed:{alertVisible:{get(){return this.$store.state.alertVisible},set(t){this.$store.commit("SET_ALERT_VISIBLE",t)}}},watch:{alertCheck:function(t){if(t.isClick)if("OK"===t.OKorCancel){if(0===this.funcNum)return;-1===this.funcNum?this.hideAlert():-2===this.funcNum&&(this.hideAlert(),this.$router.go(-1))}else"Cancel"===t.OKorCancel&&this.hideAlert()}}},f=s(1241);const C=(0,f.A)(L,[["render",G]]);var y=C}}]);
//# sourceMappingURL=733.f26f8139.js.map