"use strict";(self["webpackChunkssg60th_d_exam_client"]=self["webpackChunkssg60th_d_exam_client"]||[]).push([[479],{8755:function(t,e,s){s.d(e,{A:function(){return X}});var a=s(6768),i=s(5130),r=s(4232);const n={xmlns:"http://www.w3.org/2000/svg",style:{display:"none"}},o=(0,a.Fv)('<symbol id="check-circle-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"></path></symbol><symbol id="info-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"></path></symbol><symbol id="exclamation-triangle-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"></path></symbol>',3),l=[o],c={class:"container"},h={class:"alert-background"},d={class:"col-12"},u={class:"bi flex-shrink-0 me-2",width:"24",height:"24",role:"img","aria-label":"Success:"},m=(0,a.Lk)("use",{"xlink:href":"#check-circle-fill"},null,-1),p=[m],E={class:"bi flex-shrink-0 me-2",width:"24",height:"24",role:"img","aria-label":"Info:"},T=(0,a.Lk)("use",{"xlink:href":"#info-fill"},null,-1),k=[T],g={class:"bi flex-shrink-0 me-2",width:"24",height:"24",role:"img","aria-label":"Warning:"},M=(0,a.Lk)("use",{"xlink:href":"#exclamation-triangle-fill"},null,-1),b=[M],f={class:"alert-heading d-inline m-1"},L=(0,a.Lk)("div",{class:"col-12"},[(0,a.Lk)("hr")],-1),S={class:"col-12"},v={key:0,class:"col-12 d-grid gap-2"},C={key:1,class:"col-6 d-grid gap-2"},w={key:2,class:"col-6 d-grid gap-2"};function y(t,e,s,o,m,T){return(0,a.uX)(),(0,a.CE)(a.FK,null,[((0,a.uX)(),(0,a.CE)("svg",n,l)),(0,a.Lk)("div",c,[(0,a.bo)((0,a.Lk)("div",h,null,512),[[i.aG,t.$store.state.alertVisible]]),(0,a.bo)((0,a.Lk)("div",{class:(0,r.C4)(["alert row",T.typeColor1]),role:"alert"},[(0,a.Lk)("div",d,[(0,a.bo)(((0,a.uX)(),(0,a.CE)("svg",u,p,512)),[[i.aG,"primary"===s.MSGTYPE]]),(0,a.bo)(((0,a.uX)(),(0,a.CE)("svg",E,k,512)),[[i.aG,"warning"===s.MSGTYPE]]),(0,a.bo)(((0,a.uX)(),(0,a.CE)("svg",g,b,512)),[[i.aG,"danger"===s.MSGTYPE]]),(0,a.Lk)("h4",f,(0,r.v_)(s.TITLE),1)]),L,(0,a.Lk)("div",S,[(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.TEXT,((t,e)=>((0,a.uX)(),(0,a.CE)("li",{key:e},(0,r.v_)(t),1)))),128))])]),"OKOnly"===s.MODE?((0,a.uX)(),(0,a.CE)("div",v,[(0,a.Lk)("button",{type:"button",class:(0,r.C4)(T.typeColor2),onClick:e[0]||(e[0]=e=>t.$emit("alertCheck",!0,"OK"))},"確定",2)])):(0,a.Q3)("",!0),"OKCancel"===s.MODE?((0,a.uX)(),(0,a.CE)("div",C,[(0,a.Lk)("button",{type:"button",class:(0,r.C4)(T.typeColor2),onClick:e[1]||(e[1]=e=>t.$emit("alertCheck",!0,"OK"))},"確定",2)])):(0,a.Q3)("",!0),"OKCancel"===s.MODE?((0,a.uX)(),(0,a.CE)("div",w,[(0,a.Lk)("button",{type:"button",class:"btn btn-secondary btn-sm",onClick:e[2]||(e[2]=e=>t.$emit("alertCheck",!0,"Cancel"))},"取消")])):(0,a.Q3)("",!0)],2),[[i.aG,t.$store.state.alertVisible]])])],64)}var G={name:":Alert",props:{MODE:String,MSGTYPE:String,TITLE:String,TEXT:Array},emits:["alertCheck"],data(){return{}},methods:{},computed:{typeColor1:function(){return"primary"===this.MSGTYPE?"alert-primary":"warning"===this.MSGTYPE?"alert-warning":"danger"===this.MSGTYPE?"alert-danger":void 0},typeColor2:function(){return"primary"===this.MSGTYPE?"btn btn-primary btn-sm":"warning"===this.MSGTYPE?"btn btn-warning btn-sm":"danger"===this.MSGTYPE?"btn btn-danger btn-sm":void 0}},watch:{}},O=s(1241);const I=(0,O.A)(G,[["render",y]]);var X=I},479:function(t,e,s){s.r(e),s.d(e,{default:function(){return _}});s(4114);var a=s(6768),i=s(4232),r=s(5130);const n={class:"container"},o=(0,a.Lk)("div",{class:"text mt-4"},[(0,a.Lk)("span",null,"階"),(0,a.Lk)("span",null,"段"),(0,a.Lk)("span",null,"測"),(0,a.Lk)("span",null,"驗")],-1),l={class:"time"},c={id:"d"},h={id:"h"},d={id:"m"},u={id:"s"},m=(0,a.Lk)("h2",{class:"text-center mt-4"},"請登入",-1),p={class:"row"},E={class:"col-12"},T={class:"form-floating mb-3"},k=(0,a.Lk)("label",{for:"accountInput"},"帳號",-1),g={class:"invalid-feedback text-end"},M={class:"form-floating mb-3"},b=(0,a.Lk)("label",{for:"passwordInput"},"密碼",-1),f={class:"invalid-feedback text-end"},L={class:"col-8 text-start"},S=(0,a.Lk)("label",{class:"form-check-label",for:"rememberMeCheck"}," 記住我",-1),v={class:"col-4 text-end"},C={class:"col-12 d-grid gap-2"};function w(t,e,s,w,y,G){const O=(0,a.g2)("Alert"),I=(0,a.g2)("Loader");return(0,a.uX)(),(0,a.CE)("div",n,[(0,a.bF)(O,{MODE:y.MSG.MODE,MSGTYPE:y.MSG.TYPE,TITLE:y.MSG.TITLE,TEXT:y.MSG.TEXT,onAlertCheck:e[0]||(e[0]=(t,e)=>y.alertCheck={isClick:t,OKorCancel:e})},null,8,["MODE","MSGTYPE","TITLE","TEXT"]),(0,a.bF)(I),o,(0,a.Lk)("div",l,[(0,a.Lk)("span",null,[(0,a.Lk)("div",c,(0,i.v_)(y.timeCount.days),1),(0,a.eW)(" DAYS ")]),(0,a.Lk)("span",null,[(0,a.Lk)("div",h,(0,i.v_)(y.timeCount.hours),1),(0,a.eW)(" HOURS ")]),(0,a.Lk)("span",null,[(0,a.Lk)("div",d,(0,i.v_)(y.timeCount.minutes),1),(0,a.eW)(" MINS ")]),(0,a.Lk)("span",null,[(0,a.Lk)("div",u,(0,i.v_)(y.timeCount.seconds),1),(0,a.eW)(" SECS ")])]),m,(0,a.Lk)("form",p,[(0,a.Lk)("div",E,[(0,a.Lk)("div",T,[(0,a.bo)((0,a.Lk)("input",{type:"text",class:(0,i.C4)(["form-control",{"is-invalid":y.accountErr}]),name:"accountInput","onUpdate:modelValue":e[1]||(e[1]=t=>y.account=t),placeholder:"帳號"},null,2),[[r.Jo,y.account]]),k,(0,a.Lk)("div",g,(0,i.v_)(y.accountErrMsg),1)]),(0,a.Lk)("div",M,[(0,a.bo)((0,a.Lk)("input",{type:"current-password",class:(0,i.C4)(["form-control",{"is-invalid":y.passwordErr}]),name:"passwordInput","onUpdate:modelValue":e[2]||(e[2]=t=>y.password=t),placeholder:"密碼"},null,2),[[r.Jo,y.password]]),b,(0,a.Lk)("div",f,(0,i.v_)(y.passwordErrMsg),1)])]),(0,a.Lk)("div",L,[(0,a.bo)((0,a.Lk)("input",{class:"form-check-input",type:"checkbox",value:"",id:"rememberMeCheck","onUpdate:modelValue":e[3]||(e[3]=t=>y.rememberMe=t)},null,512),[[r.lH,y.rememberMe]]),S]),(0,a.Lk)("div",v,[(0,a.Lk)("p",{onClick:e[4]||(e[4]=e=>t.$router.push("/register"))},"註冊帳戶！")]),(0,a.Lk)("div",C,[(0,a.Lk)("button",{class:"btn btn-success btn-lg",type:"button",onClick:e[5]||(e[5]=(...t)=>G.login&&G.login(...t))},"登入")])])])}var y=s(8755),G=s(6973);s(4979);class O extends Error{}function I(t){return decodeURIComponent(atob(t).replace(/(.)/g,((t,e)=>{let s=e.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s})))}function X(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return I(e)}catch(s){return atob(e)}}function x(t,e){if("string"!==typeof t)throw new O("Invalid token specified: must be a string");e||(e={});const s=!0===e.header?0:1,a=t.split(".")[s];if("string"!==typeof a)throw new O(`Invalid token specified: missing part #${s+1}`);let i;try{i=X(a)}catch(r){throw new O(`Invalid token specified: invalid base64 for part #${s+1} (${r.message})`)}try{return JSON.parse(i)}catch(r){throw new O(`Invalid token specified: invalid json for part #${s+1} (${r.message})`)}}O.prototype.name="InvalidTokenError";var A={name:"Login",components:{Alert:y.A,Loader:G.A},data(){return{MSG:{MODE:"",TYPE:"",TITLE:"",TEXT:[]},alertCheck:!1,funcNum:0,endTime:new Date,timeCount:{days:"00",hours:"00",minutes:"00",seconds:"00"},account:"",accountErr:!1,accountErrMsg:"",password:"",passwordErr:!1,passwordErrMsg:"",rememberMe:!1}},methods:{count(){let t=this.$store.state.countDown-new Date,e=Math.floor(t/864e5),s=Math.floor(t%864e5/36e5),a=Math.floor(t%36e5/6e4),i=Math.floor(t%6e4/1e3);e=e<10?"0"+e:e,s=s<10?"0"+s:s,a=a<10?"0"+a:a,i=i<10?"0"+i:i,this.timeCount={days:e,hours:s,minutes:a,seconds:i},t<=0&&(clearInterval(this.timer),this.timeCount={days:"00",hours:"00",minutes:"00",seconds:"00"})},login(){""===this.account.trim()&&(this.accountErr=!0,this.accountErrMsg="請輸入帳號"),""===this.password.trim()&&(this.passwordErr=!0,this.passwordErrMsg="請輸入密碼"),this.accountErr||this.passwordErr||this.$http.post("api/users/login",{account:this.account,password:this.password,rememberMe:this.rememberMe}).then((t=>{if(200===t.data.code){localStorage.setItem("eleToken",t.data.token);const e=x(t.data.token),s={studentID:e.studentID,account:e.account,name:e.name,ident:e.ident,examExp:e.exam_exp};this.$store.commit("SET_ACCOUNT",s),this.alertVisible=!0,this.MSG.MODE="OKOnly",this.funcNum=1,this.MSG.TYPE="primary",this.MSG.TITLE="系統提示",this.MSG.TEXT=[],this.MSG.TEXT=this.MSG.TEXT.concat(t.data.msg)}else this.alertVisible=!0,this.MSG.MODE="OKOnly",this.funcNum=-1,this.MSG.TYPE="danger",this.MSG.TITLE="系統錯誤",this.MSG.TEXT=[],this.MSG.TEXT=this.MSG.TEXT.concat(t.data.msg),""!==t.data.sys&&this.MSG.TEXT.push(t.data.sys)})).catch((t=>{this.alertVisible=!0,this.MSG.MODE="OKOnly",this.funcNum=-1,this.MSG.TYPE="danger",this.MSG.TITLE="系統錯誤",this.MSG.TEXT=[],this.MSG.TEXT.push(t)}))},hideAlert(){this.$store.commit("SET_ALERT_VISIBLE",!1),this.alertVisible=!1}},created(){""===this.$store.state.countDown&&this.$http.get("api/systemManage/getCountDown").then((t=>{200===t.data.code?this.$store.commit("SET_COUNT_DOWN",new Date(t.data.time)):(this.alertVisible=!0,this.MSG.MODE="OKOnly",this.funcNum=-1,this.MSG.TYPE="danger",this.MSG.TITLE="系統錯誤",this.MSG.TEXT=[],this.MSG.TEXT=this.MSG.TEXT.concat(t.data.msg),""!==t.data.sys&&this.MSG.TEXT.push(t.data.sys))})),this.$http.get("api/users/getSession").then((t=>{200===t.data.code?t.data.data.account&&(this.account=t.data.data.account,this.password=t.data.data.password):(this.alertVisible=!0,this.MSG.MODE="OKOnly",this.funcNum=-1,this.MSG.TYPE="danger",this.MSG.TITLE="系統錯誤",this.MSG.TEXT=[],this.MSG.TEXT=this.MSG.TEXT.concat(t.data.msg),""!==t.data.sys&&this.MSG.TEXT.push(t.data.sys))}))},mounted(){this.count(),this.timer=setInterval((()=>{this.count()}),1e3)},beforeDestroy(){clearInterval(this.timer)},computed:{alertVisible:{get(){return this.$store.state.alertVisible},set(t){this.$store.commit("SET_ALERT_VISIBLE",t)}}},watch:{alertCheck:function(t){if(t.isClick)if("OK"===t.OKorCancel){if(0===this.funcNum)return;-1===this.funcNum?this.hideAlert():-2===this.funcNum?(this.hideAlert(),this.$router.go(-1)):1===this.funcNum&&("Admin"===this.$store.state.account.ident?(this.hideAlert(),this.$router.push("/systemManage")):(this.hideAlert(),this.$router.push("/examLobby")))}else"Cancel"===t.OKorCancel&&this.hideAlert()},account:function(){""===this.account.trim()?(this.accountErr=!0,this.accountErrMsg="請輸入帳號"):this.accountErr=!1},password:function(){""===this.password.trim()?(this.passwordErr=!0,this.passwordErrMsg="請輸入密碼"):this.passwordErr=!1}}},$=s(1241);const D=(0,$.A)(A,[["render",w]]);var _=D}}]);
//# sourceMappingURL=479.2dec0d69.js.map