"use strict";(self["webpackChunkssg60th_d_exam_client"]=self["webpackChunkssg60th_d_exam_client"]||[]).push([[53],{8755:function(t,s,e){e.d(s,{A:function(){return D}});var i=e(6768),a=e(5130),n=e(4232);const l={xmlns:"http://www.w3.org/2000/svg",style:{display:"none"}},r=(0,i.Fv)('<symbol id="check-circle-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"></path></symbol><symbol id="info-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"></path></symbol><symbol id="exclamation-triangle-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"></path></symbol>',3),c=[r],h={class:"container"},o={class:"alert-background"},u={class:"col-12"},T={class:"bi flex-shrink-0 me-2",width:"24",height:"24",role:"img","aria-label":"Success:"},d=(0,i.Lk)("use",{"xlink:href":"#check-circle-fill"},null,-1),E=[d],m={class:"bi flex-shrink-0 me-2",width:"24",height:"24",role:"img","aria-label":"Info:"},M=(0,i.Lk)("use",{"xlink:href":"#info-fill"},null,-1),S=[M],b={class:"bi flex-shrink-0 me-2",width:"24",height:"24",role:"img","aria-label":"Warning:"},G=(0,i.Lk)("use",{"xlink:href":"#exclamation-triangle-fill"},null,-1),p=[G],g={class:"alert-heading d-inline m-1"},k=(0,i.Lk)("div",{class:"col-12"},[(0,i.Lk)("hr")],-1),f={class:"col-12"},L={key:0,class:"col-12 d-grid gap-2"},y={key:1,class:"col-6 d-grid gap-2"},C={key:2,class:"col-6 d-grid gap-2"};function O(t,s,e,r,d,M){return(0,i.uX)(),(0,i.CE)(i.FK,null,[((0,i.uX)(),(0,i.CE)("svg",l,c)),(0,i.Lk)("div",h,[(0,i.bo)((0,i.Lk)("div",o,null,512),[[a.aG,t.$store.state.alertVisible]]),(0,i.bo)((0,i.Lk)("div",{class:(0,n.C4)(["alert row",M.typeColor1]),role:"alert"},[(0,i.Lk)("div",u,[(0,i.bo)(((0,i.uX)(),(0,i.CE)("svg",T,E,512)),[[a.aG,"primary"===e.MSGTYPE]]),(0,i.bo)(((0,i.uX)(),(0,i.CE)("svg",m,S,512)),[[a.aG,"warning"===e.MSGTYPE]]),(0,i.bo)(((0,i.uX)(),(0,i.CE)("svg",b,p,512)),[[a.aG,"danger"===e.MSGTYPE]]),(0,i.Lk)("h4",g,(0,n.v_)(e.TITLE),1)]),k,(0,i.Lk)("div",f,[(0,i.Lk)("ul",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.TEXT,((t,s)=>((0,i.uX)(),(0,i.CE)("li",{key:s},(0,n.v_)(t),1)))),128))])]),"OKOnly"===e.MODE?((0,i.uX)(),(0,i.CE)("div",L,[(0,i.Lk)("button",{type:"button",class:(0,n.C4)(M.typeColor2),onClick:s[0]||(s[0]=s=>t.$emit("alertCheck",!0,"OK"))},"確定",2)])):(0,i.Q3)("",!0),"OKCancel"===e.MODE?((0,i.uX)(),(0,i.CE)("div",y,[(0,i.Lk)("button",{type:"button",class:(0,n.C4)(M.typeColor2),onClick:s[1]||(s[1]=s=>t.$emit("alertCheck",!0,"OK"))},"確定",2)])):(0,i.Q3)("",!0),"OKCancel"===e.MODE?((0,i.uX)(),(0,i.CE)("div",C,[(0,i.Lk)("button",{type:"button",class:"btn btn-secondary btn-sm",onClick:s[2]||(s[2]=s=>t.$emit("alertCheck",!0,"Cancel"))},"取消")])):(0,i.Q3)("",!0)],2),[[a.aG,t.$store.state.alertVisible]])])],64)}var X={name:":Alert",props:{MODE:String,MSGTYPE:String,TITLE:String,TEXT:Array},emits:["alertCheck"],data(){return{}},methods:{},computed:{typeColor1:function(){return"primary"===this.MSGTYPE?"alert-primary":"warning"===this.MSGTYPE?"alert-warning":"danger"===this.MSGTYPE?"alert-danger":void 0},typeColor2:function(){return"primary"===this.MSGTYPE?"btn btn-primary btn-sm":"warning"===this.MSGTYPE?"btn btn-warning btn-sm":"danger"===this.MSGTYPE?"btn btn-danger btn-sm":void 0}},watch:{}},v=e(1241);const I=(0,v.A)(X,[["render",O]]);var D=I},9053:function(t,s,e){e.r(s),e.d(s,{default:function(){return X}});var i=e(6768),a=e(5130);const n={class:"container"},l=(0,i.Lk)("h2",{class:"text-center"},"帳戶管理-編輯",-1),r={class:"row"},c={class:"col-12"},h={class:"form-floating mb-3"},o=(0,i.Lk)("label",{for:"studentIDInput"},"學號",-1),u={class:"form-floating mb-3"},T=(0,i.Lk)("label",{for:"userNameInput"},"名稱",-1),d={class:"form-floating mb-3"},E=(0,i.Lk)("label",{for:"accountInput"},"帳號",-1),m=(0,i.Lk)("option",{value:"Admin"},"管理者",-1),M=(0,i.Lk)("option",{value:"User"},"使用者",-1),S=(0,i.Lk)("option",{value:"Register"},"未審核",-1),b=(0,i.Lk)("option",{value:"Stop"},"停用",-1),G=[m,M,S,b],p={class:"col-12 d-grid gap-2 my-2"},g={class:"col-12 d-grid gap-2 my-2"},k={class:"col-12 d-grid gap-2 my-2"};function f(t,s,e,m,M,S){const b=(0,i.g2)("Alert");return(0,i.uX)(),(0,i.CE)("div",n,[l,(0,i.Lk)("button",{class:"btn btn-outline-secondary btn-sm mb-3",type:"button",onClick:s[0]||(s[0]=s=>t.$router.go(-1))},"返回上一頁"),(0,i.bF)(b,{MODE:M.MSG.MODE,MSGTYPE:M.MSG.TYPE,TITLE:M.MSG.TITLE,TEXT:M.MSG.TEXT,onAlertCheck:s[1]||(s[1]=(t,s)=>M.alertCheck={isClick:t,OKorCancel:s})},null,8,["MODE","MSGTYPE","TITLE","TEXT"]),(0,i.Lk)("div",r,[(0,i.Lk)("div",c,[(0,i.Lk)("div",h,[(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control",name:"studentIDInput","onUpdate:modelValue":s[2]||(s[2]=t=>M.user.studentID=t),placeholder:"學號",disabled:""},null,512),[[a.Jo,M.user.studentID]]),o]),(0,i.Lk)("div",u,[(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control",name:"userNameInput","onUpdate:modelValue":s[3]||(s[3]=t=>M.user.name=t),placeholder:"名稱"},null,512),[[a.Jo,M.user.name]]),T]),(0,i.Lk)("div",d,[(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control",name:"accountInput","onUpdate:modelValue":s[4]||(s[4]=t=>M.user.account=t),placeholder:"帳號"},null,512),[[a.Jo,M.user.account]]),E]),(0,i.bo)((0,i.Lk)("select",{class:"form-select form-select-lg mb-3","aria-label":".form-select-lg example","onUpdate:modelValue":s[5]||(s[5]=t=>M.user.ident=t)},G,512),[[a.u1,M.user.ident]])]),(0,i.Lk)("div",p,[(0,i.Lk)("button",{class:"btn btn-success btn-lg",type:"button",onClick:s[6]||(s[6]=t=>S.sendEdit())},"確認修改")])]),(0,i.Lk)("div",g,[(0,i.Lk)("button",{class:"btn btn-warning btn-lg",type:"button",onClick:s[7]||(s[7]=t=>S.resetExamExp())},"重置學習紀錄")]),(0,i.Lk)("div",k,[(0,i.Lk)("button",{class:"btn btn-danger btn-lg",type:"button",onClick:s[8]||(s[8]=t=>S.deleteUser())},"刪除帳戶")])])}e(4114);var L=e(8755),y={name:"AccountEdit",components:{Alert:L.A},data(){return{MSG:{MODE:"",TYPE:"",TITLE:"",TEXT:[]},alertCheck:!1,funcNum:0,user:{studentID:"",name:"",account:"",ident:""}}},methods:{sendEdit(){this.alertVisible=!0,this.MSG.MODE="OKCancel",this.funcNum=1,this.MSG.TYPE="warning",this.MSG.TITLE="系統警告",this.MSG.TEXT=["是否要修改帳戶參數？"]},resetExamExp(){this.alertVisible=!0,this.MSG.MODE="OKCancel",this.funcNum=2,this.MSG.TYPE="warning",this.MSG.TITLE="系統警告",this.MSG.TEXT=["是否要重置學習紀錄？"]},deleteUser(){this.alertVisible=!0,this.MSG.MODE="OKCancel",this.funcNum=3,this.MSG.TYPE="danger",this.MSG.TITLE="系統警告",this.MSG.TEXT=["是否要刪除帳戶？"]},hideAlert(){this.$store.commit("SET_ALERT_VISIBLE",!1),this.alertVisible=!1}},created(){this.user=this.$store.state.accountEdit},mounted(){this.$store.commit("SET_ACCOUNT_EDIT",{})},computed:{alertVisible:{get(){return this.$store.state.alertVisible},set(t){this.$store.commit("SET_ALERT_VISIBLE",t)}}},watch:{alertCheck:function(t){if(t.isClick)if("OK"===t.OKorCancel){if(0===this.funcNum)return;if(-1===this.funcNum)this.hideAlert();else if(-2===this.funcNum)this.hideAlert(),this.$router.go(-1);else if(1===this.funcNum){this.hideAlert();const t={studentID:this.user.studentID,name:this.user.name,account:this.user.account,ident:this.user.ident};this.$http.post("api/accountManage/modifyUser",t).then((t=>{200===t.data.code?(this.alertVisible=!0,this.MSG.MODE="OKOnly",this.funcNum=-2,this.MSG.TYPE="primary",this.MSG.TITLE="系統提示",this.MSG.TEXT=[],this.MSG.TEXT=this.MSG.TEXT.concat(t.data.msg)):(this.alertVisible=!0,this.MSG.MODE="OKOnly",this.funcNum=-1,this.MSG.TYPE="danger",this.MSG.TITLE="系統錯誤",this.MSG.TEXT=[],this.MSG.TEXT=this.MSG.TEXT.concat(t.data.msg),""!==t.data.sys&&this.MSG.TEXT.push(t.data.sys))})).catch((t=>{this.alertVisible=!0,this.MSG.MODE="OKOnly",this.funcNum=-1,this.MSG.TYPE="danger",this.MSG.TITLE="系統錯誤",this.MSG.TEXT=[],this.MSG.TEXT.push(t)}))}else 2===this.funcNum?(this.hideAlert(),this.$http.post("api/accountManage/resetExamExp",this.user).then((t=>{200===t.data.code?(this.alertVisible=!0,this.MSG.MODE="OKOnly",this.funcNum=-1,this.MSG.TYPE="primary",this.MSG.TITLE="系統提示",this.MSG.TEXT=[],this.MSG.TEXT=this.MSG.TEXT.concat(t.data.msg)):(this.alertVisible=!0,this.MSG.MODE="OKOnly",this.funcNum=-1,this.MSG.TYPE="danger",this.MSG.TITLE="系統錯誤",this.MSG.TEXT=[],this.MSG.TEXT=this.MSG.TEXT.concat(t.data.msg),""!==t.data.sys&&this.MSG.TEXT.push(t.data.sys))})).catch((t=>{this.alertVisible=!0,this.MSG.MODE="OKOnly",this.funcNum=-1,this.MSG.TYPE="danger",this.MSG.TITLE="系統錯誤",this.MSG.TEXT=[],this.MSG.TEXT.push(t)}))):3===this.funcNum&&(this.hideAlert(),this.$http.post("api/accountManage/deleteUser",this.user).then((t=>{200===t.data.code?(this.alertVisible=!0,this.MSG.MODE="OKOnly",this.funcNum=-2,this.MSG.TYPE="primary",this.MSG.TITLE="系統提示",this.MSG.TEXT=[],this.MSG.TEXT=this.MSG.TEXT.concat(t.data.msg)):(this.alertVisible=!0,this.MSG.MODE="OKOnly",this.funcNum=-1,this.MSG.TYPE="danger",this.MSG.TITLE="系統錯誤",this.MSG.TEXT=[],this.MSG.TEXT=this.MSG.TEXT.concat(t.data.msg),""!==t.data.sys&&this.MSG.TEXT.push(t.data.sys))})).catch((t=>{this.alertVisible=!0,this.MSG.MODE="OKOnly",this.funcNum=-1,this.MSG.TYPE="danger",this.MSG.TITLE="系統錯誤",this.MSG.TEXT=[],this.MSG.TEXT.push(t)})))}else"Cancel"===t.OKorCancel&&this.hideAlert()}}},C=e(1241);const O=(0,C.A)(y,[["render",f]]);var X=O}}]);
//# sourceMappingURL=53.0b7f90c0.js.map